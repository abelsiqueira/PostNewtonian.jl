<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Python · PostNewtonian.jl</title><meta name="title" content="Python · PostNewtonian.jl"/><meta property="og:title" content="Python · PostNewtonian.jl"/><meta property="twitter:title" content="Python · PostNewtonian.jl"/><meta name="description" content="Documentation for PostNewtonian.jl."/><meta property="og:description" content="Documentation for PostNewtonian.jl."/><meta property="twitter:description" content="Documentation for PostNewtonian.jl."/><meta property="og:url" content="https://moble.github.io/PostNewtonian.jl/stable/interface/python/"/><meta property="twitter:url" content="https://moble.github.io/PostNewtonian.jl/stable/interface/python/"/><link rel="canonical" href="https://moble.github.io/PostNewtonian.jl/stable/interface/python/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PostNewtonian.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Interface</span><ul><li><a class="tocitem" href="../high-level/">High-level interface</a></li><li><a class="tocitem" href="../units/">Units</a></li><li><a class="tocitem" href="../symbolics/">Symbolic manipulations</a></li><li><a class="tocitem" href="../differentiation/">Automatic differentiation</a></li><li><a class="tocitem" href="../assorted_binaries/">Assorted binaries</a></li><li class="is-active"><a class="tocitem" href>Python</a><ul class="internal"><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li><li><a class="tocitem" href="#Testing-the-installation"><span>Testing the installation</span></a></li></ul></li><li><a class="tocitem" href="../gwframes/">GWFrames</a></li></ul></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../../internals/code_structure/">Code structure</a></li><li><a class="tocitem" href="../../internals/systems/">PN systems</a></li><li><a class="tocitem" href="../../internals/fundamental_variables/">Fundamental variables</a></li><li><a class="tocitem" href="../../internals/derived_variables/">Derived variables</a></li><li><a class="tocitem" href="../../internals/pn_expressions/">PN expressions</a></li><li><a class="tocitem" href="../../internals/dynamics/">Dynamics</a></li><li><a class="tocitem" href="../../internals/waveforms/">Waveforms</a></li><li><a class="tocitem" href="../../internals/utilities/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../adding_terms/">Adding terms</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Interface</a></li><li class="is-active"><a href>Python</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Python</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/moble/PostNewtonian.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/moble/PostNewtonian.jl/blob/main/docs/src/interface/python.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-this-package-from-Python"><a class="docs-heading-anchor" href="#Using-this-package-from-Python">Using this package from Python</a><a id="Using-this-package-from-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Using-this-package-from-Python" title="Permalink"></a></h1><p>While not quite as natural as calling Python code from Julia, it is very easy to call Julia code from Python.  The process is essentially the same as using any other Python package, other than installing Julia itself and any dependencies <em>within</em> Julia that you may need (both of which are much easier than similar tasks in Python).</p><div class="admonition is-warning"><header class="admonition-header">Be careful of using unicode in Python!</header><div class="admonition-body"><p>Every effort is made to ensure that <em>users</em> of this package can always use plain ASCII — even though this package uses Unicode <em>internally</em> and in many of the examples found in this documentation.  For example, if keyword arguments are accepted as Unicode, ASCII equivalents are usually also accepted.  Some function <em>names</em> are similarly in Unicode, but have ASCII equivalents.  See the various functions&#39; documentation for acceptable replacements.</p><p>It can be dangerous to use Unicode in Python in particular. Python only accepts a small subset of Unicode — so that <code>M₁</code> for example is not valid input.  And what it does accept is automatically <a href="https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms">&quot;NFKC normalized&quot;</a>. For example, variable names <code>Mₐ</code>, <code>Ma</code>, and <code>Mᵃ</code> are all treated identically by Python.  To illustrate this, consider the following python code:</p><pre><code class="language-python hljs">&gt;&gt;&gt; Mₐ = 1
&gt;&gt;&gt; Mᵃ = 2
&gt;&gt;&gt; Ma = 3
&gt;&gt;&gt; print((Mₐ, Mᵃ, Ma))
(3, 3, 3)</code></pre><p>We might have expected three different values <code>(1, 2, 3)</code> in the output, but Python never even sees the variable names as different strings; it interprets these expressions as setting, resetting, and resetting again the value of <code>Ma</code>.</p><p>If you find an example where ASCII substitutions are not possible, please file a <a href="https://github.com/moble/PostNewtonian.jl/issues/new">bug report</a>.</p></div></div><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><p>Installation is pretty simple.  There are two optional steps first, but generally just one required step.  </p><div class="admonition is-success"><header class="admonition-header">TL;DR</header><div class="admonition-body"><p>Basically, you just need to install the <code>sxs</code> package, and then run the python command <code>from sxs import julia</code>.</p></div></div><h3 id="Optional-step-1:-Install-Julia"><a class="docs-heading-anchor" href="#Optional-step-1:-Install-Julia">Optional step 1: Install Julia</a><a id="Optional-step-1:-Install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Optional-step-1:-Install-Julia" title="Permalink"></a></h3><p>If a Julia installation is not already available, the made below will automatically install it for you <em>in the python environment you are using</em>.  If you have multiple python environments, this means that there will be multiple copies of Julia installed, one in each environment.  Installing Julia beforehand will avoid this duplication.</p><p>The officially recommended method is to use <a href="https://github.com/JuliaLang/juliaup?tab=readme-ov-file#juliaup---julia-version-manager">the <code>juliaup</code> installer</a>, which also provides an easy way to update Julia itself, manage multiple versions of Julia, and update it.</p><p>Note that the <code>julia</code> executable must be on your <code>PATH</code> for the next steps to work properly.  You may need to restart your shell or terminal after installing Julia to make sure.</p><h3 id="Optional-step-2:-Create-a-conda-env"><a class="docs-heading-anchor" href="#Optional-step-2:-Create-a-conda-env">Optional step 2: Create a conda env</a><a id="Optional-step-2:-Create-a-conda-env-1"></a><a class="docs-heading-anchor-permalink" href="#Optional-step-2:-Create-a-conda-env" title="Permalink"></a></h3><p>Create a conda<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> env just for this task</p><pre><code class="language-bash hljs">conda create -c conda-forge -n julia_pn python numpy matplotlib
conda activate julia_pn</code></pre><p>Add whatever other packages you use to that first line.</p><h3 id="Required-step:-Install-the-sxs-package-and-use-it-to-install-Julia"><a class="docs-heading-anchor" href="#Required-step:-Install-the-sxs-package-and-use-it-to-install-Julia">Required step: Install the <code>sxs</code> package and use it to install Julia</a><a id="Required-step:-Install-the-sxs-package-and-use-it-to-install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Required-step:-Install-the-sxs-package-and-use-it-to-install-Julia" title="Permalink"></a></h3><p>While the <code>sxs</code> package is not <em>strictly</em> required, it is very useful for providing a general interface to waveforms, and will automatically install the <code>PostNewtonian</code> package and its dependencies.  Simply run</p><pre><code class="language-bash hljs">python -m pip install sxs
python -c &#39;from sxs import julia&#39;</code></pre><p>The first line installs <code>sxs</code> itself, but not Julia; the second line will take a few minutes to install Julia then download and compile all the necessary packages.</p><h2 id="Testing-the-installation"><a class="docs-heading-anchor" href="#Testing-the-installation">Testing the installation</a><a id="Testing-the-installation-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-the-installation" title="Permalink"></a></h2><p>Start up a python session and run something like this:</p><pre><code class="language-python hljs"># Any python imports you need go here
import numpy as np
import matplotlib.pyplot as plt

# Start the Julia session
from sxs.julia import PNWaveform

# Declare the essential parameters
M1 = 0.5
M2 = 0.5
chi1 = [0.1, 0.2, 0.3]
chi2 = [-0.2, 0.1, -0.3]
Omega_i = 0.01

# Call into Julia to run some function
w = PNWaveform(M1, M2, chi1, chi2, Omega_i)

# Plot the magnitudes of all the modes as functions of time
plt.semilogy(w.t, np.abs(w.data))</code></pre><p>The <code>w</code> object returned here will be an <code>sxs.WaveformModes</code> object, with all the usual methods and properties.</p><hr/><p>In general, you can now call any function from the Julia <code>PostNewtonian</code> package by running</p><pre><code class="language-python hljs">from sxs.julia import PostNewtonian</code></pre><p>and then calling the function just as you would if you had run <code>import PostNewtonian</code> in Julia.  As a fallback, you can evaluate actual Julia code in the Julia session using <code>PostNewtonian.seval(&quot;&lt;Julia code goes here&gt;&quot;)</code>.  This returns whatever the Julia code would return.  A simple example is <code>x = PostNewtonian.seval(&quot;1+2&quot;)</code>.  See the <a href="https://github.com/cjdoris/PythonCall.jl#readme">documentation for <code>juliacall</code> here</a> for more details.</p><p>Sometimes, the returned objects will be wrappers around Julia <code>Vector</code>s, <code>Matrix</code>es, or more generally shaped <code>Array</code>s.  Usually, you will be able to pass these objects directly to Python functions. If you really need a <code>numpy</code> array, you can use the <code>to_numpy()</code> method that the wrappers will support.</p><p>Of course, it is <em>much</em> simpler to call Python code from Julia, so if you find yourself using a lot of Julia code, you may want to consider flipping your approach.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>As general advice, you should run <code>conda install -y mamba -n   base -c conda-forge</code>, and then just use the command <code>mamba</code>   wherever you would have used <code>conda</code>; <code>mamba</code> is a complete   drop-in replacement, but is much faster because it&#39;s written in   C instead of python.  For example, <code>mamba create -n julia_pn   python numpy matplotlib</code> will typically run faster than the   command given here.  This becomes a huge advantage when the env   has lots of dependencies.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../assorted_binaries/">« Assorted binaries</a><a class="docs-footer-nextpage" href="../gwframes/">GWFrames »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Saturday 1 June 2024 04:08">Saturday 1 June 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
